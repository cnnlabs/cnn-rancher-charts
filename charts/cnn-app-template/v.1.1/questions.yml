categories:
  - App
questions:
  - variable: deployment.create
    type: boolean
    required: true
    default: false
    label: "Create new deployment"
    description: "See above for detailed description."
    show_subquestion_if: true
    subquestions:
      - variable: image.url
        default: quay.io/turner/simple-backend:1.0
        type: string
        required: true
        label: "Image URL"
        description: "URL found through https://stash.cnn.io. Must be pushed via `turner+team_cnn` quay.io robot account."
      - variable: deployment.port
        default: 8080
        type: int
        required: true
        label: "Container Port"
        description: "Port container is listening on."
      - variable: deployment.healthcheck
        default: /_healthcheck
        type: string
        required: true
        label: "Healthcheck Route"
      - variable: logzio
        default: stderr
        type: enum
        options:
          - stdout
          - stderr
          - all
        label: "Logzio"
        description: "This is for shipping console logs at the container level. The default is to only ship stderr."
      - variable: monitoring.kb_article
        default: ""
        type: string
        required: true
        label: "KB Article"
        description: "URL to docs or ERP so the DOC knows what to do when this deployment fails."
  - variable: ingress.host
    type: string
    required: true
    default: cnnio.net
    label: "Ingress Domain"
    description: "If this is anything other than `cnnio.net`, you will need to CNAME to the automatically created `cnnio.net` host manually."
  - variable: ingress.type
    default: internal
    type: enum
    options:
      - internal
      - external
